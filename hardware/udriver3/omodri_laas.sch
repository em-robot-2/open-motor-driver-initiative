EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 10
Title "Open MOtor DRiver Initiative (OMODRI)"
Date ""
Rev "1.0"
Comp "LAAS/CNRS"
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Wire Wire Line
	6850 5200 6550 5200
Wire Wire Line
	6550 5200 6550 2900
Wire Wire Line
	6550 2900 6850 2900
Wire Wire Line
	6850 3000 6450 3000
Wire Wire Line
	6450 3000 6450 5300
Wire Wire Line
	6450 5300 6850 5300
Wire Wire Line
	6850 3100 6350 3100
Wire Wire Line
	6350 3100 6350 5400
Wire Wire Line
	6350 5400 6850 5400
$Sheet
S 6850 3650 500  2100
U 5F387075
F0 "DRV driver for motor2" 50
F1 "OMODRI_driver.sch" 50
F2 "INHA" I L 6850 3850 50 
F3 "INLA" I L 6850 3950 50 
F4 "INHB" I L 6850 4050 50 
F5 "INLB" I L 6850 4150 50 
F6 "INHC" I L 6850 4250 50 
F7 "INLC" I L 6850 4350 50 
F8 "DRV_EN" I L 6850 3700 50 
F9 "SOC" O L 6850 5050 50 
F10 "SOB" O L 6850 4950 50 
F11 "SOA" O L 6850 4850 50 
F12 "SCLK" I L 6850 5200 50 
F13 "SDI" I L 6850 5300 50 
F14 "SDO" O L 6850 5400 50 
F15 "VSENSA" O L 6850 4500 50 
F16 "VSENSB" O L 6850 4600 50 
F17 "VSENSC" O L 6850 4700 50 
F18 "~nFAULT" O L 6850 5650 50 
F19 "~nSCS" I L 6850 5500 50 
$EndSheet
$Sheet
S 6850 1350 550  2100
U 5F3255E8
F0 "DRV driver for motor1" 50
F1 "OMODRI_driver.sch" 50
F2 "INHA" I L 6850 1550 50 
F3 "INLA" I L 6850 1650 50 
F4 "INHB" I L 6850 1750 50 
F5 "INLB" I L 6850 1850 50 
F6 "INHC" I L 6850 1950 50 
F7 "INLC" I L 6850 2050 50 
F8 "DRV_EN" I L 6850 1400 50 
F9 "SOC" O L 6850 2750 50 
F10 "SOB" O L 6850 2650 50 
F11 "SOA" O L 6850 2550 50 
F12 "SCLK" I L 6850 2900 50 
F13 "SDI" I L 6850 3000 50 
F14 "SDO" O L 6850 3100 50 
F15 "VSENSA" O L 6850 2200 50 
F16 "VSENSB" O L 6850 2300 50 
F17 "VSENSC" O L 6850 2400 50 
F18 "~nFAULT" O L 6850 3350 50 
F19 "~nSCS" I L 6850 3200 50 
$EndSheet
$Sheet
S 6800 900  600  200 
U 5F3A3F16
F0 "Power distribution" 50
F1 "OMODRI_power.sch" 50
F2 "PG_1V2" O L 6800 1000 50 
$EndSheet
$Sheet
S 2850 1750 550  700 
U 60E4937F
F0 "Quadrature Encoders for motor 1 & 2" 50
F1 "OMODRI_QuadEncod.sch" 50
F2 "EQEP1_A" B R 3400 1800 50 
F3 "EQEP1_B" B R 3400 1900 50 
F4 "EQEP1_I" B R 3400 2000 50 
F5 "EQEP2_A" B R 3400 2150 50 
F6 "EQEP2_B" B R 3400 2250 50 
F7 "EQEP2_I" B R 3400 2350 50 
$EndSheet
$Sheet
S 2850 3950 550  250 
U 60EC8491
F0 "CAN Bus link" 50
F1 "OMODRI_CAN.sch" 50
F2 "TXD_CAN" I R 3400 4000 50 
F3 "RXD_CAN" O R 3400 4100 50 
$EndSheet
$Sheet
S 4900 900  550  200 
U 60EE22FD
F0 "JTAG Bus + Oscillator + Reset" 50
F1 "OMODRI_JTAG_OSC_RST.sch" 50
F2 "PG_1V2" I R 5450 1000 50 
$EndSheet
$Sheet
S 4700 1350 1400 4400
U 5F3A5338
F0 "F2838x GPIOs" 50
F1 "OMODRI_GPIO.sch" 50
F2 "ENC1_CHA" I L 4700 1800 50 
F3 "ENC1_CHB" I L 4700 1900 50 
F4 "ENC1_CHI" I L 4700 2000 50 
F5 "ENC2_CHA" I L 4700 2150 50 
F6 "ENC2_CHB" I L 4700 2250 50 
F7 "ENC2_CHI" I L 4700 2350 50 
F8 "DEBUG_INT_PIN1" B L 4700 1400 50 
F9 "DEBUG_INT_PIN2" B L 4700 1500 50 
F10 "DRV_SPI_SIMO" O R 6100 5300 50 
F11 "DRV_SPI_SOMI" I R 6100 5400 50 
F12 "DRV_SPI_CLK" O R 6100 5200 50 
F13 "DRV1_GPIO_EN" O R 6100 1400 50 
F14 "DRV2_GPIO_EN" O R 6100 3700 50 
F15 "COM_SPI_SIMO" O L 4700 4650 50 
F16 "COM_SPI_SOMI" I L 4700 4750 50 
F17 "COM_SPI_CLK" O L 4700 4550 50 
F18 "M1_PWM1_CHA" O R 6100 1550 50 
F19 "M1_PWM1_CHB" O R 6100 1650 50 
F20 "M1_PWM2_CHA" O R 6100 1750 50 
F21 "M1_PWM2_CHB" O R 6100 1850 50 
F22 "M1_PWM3_CHA" O R 6100 1950 50 
F23 "M1_PWM3_CHB" O R 6100 2050 50 
F24 "M2_PWM1_CHA" O R 6100 3850 50 
F25 "M2_PWM1_CHB" O R 6100 3950 50 
F26 "M2_PWM2_CHA" O R 6100 4050 50 
F27 "M2_PWM2_CHB" O R 6100 4150 50 
F28 "M2_PWM3_CHA" O R 6100 4250 50 
F29 "M2_PWM3_CHB" O R 6100 4350 50 
F30 "M1_Ia" I R 6100 2550 50 
F31 "M1_Ib" I R 6100 2650 50 
F32 "M1_Ic" I R 6100 2750 50 
F33 "M2_Ia" I R 6100 4850 50 
F34 "M2_Ib" I R 6100 4950 50 
F35 "M2_Ic" I R 6100 5050 50 
F36 "M1_Va" I R 6100 2200 50 
F37 "M1_Vb" I R 6100 2300 50 
F38 "M1_Vc" I R 6100 2400 50 
F39 "M2_Va" I R 6100 4500 50 
F40 "M2_Vb" I R 6100 4600 50 
F41 "M2_Vc" I R 6100 4700 50 
F42 "M1_Vbus" I L 4700 5600 50 
F43 "~DRV1_GPIO_CSn~" O R 6100 3200 50 
F44 "~DRV1_GPIO_FAULTn~" I R 6100 3350 50 
F45 "~DRV2_GPIO_CSn~" O R 6100 5500 50 
F46 "~DRV2_GPIO_FAULTn~" I R 6100 5650 50 
F47 "~COM_SPI_CS~" O L 4700 4850 50 
F48 "CAN_TX" O L 4700 4000 50 
F49 "CAN_RX" I L 4700 4100 50 
F50 "FSI_RXA_CLK" I L 4700 3350 50 
F51 "FSI_RXA_D0" I L 4700 3450 50 
F52 "FSI_RXA_D1" I L 4700 3550 50 
F53 "FSI_TXA_CLK" O L 4700 2700 50 
F54 "FSI_TXA_D0" O L 4700 2800 50 
F55 "FSI_TXA_D1" O L 4700 2900 50 
F56 "FSI_TX_EN" O L 4700 3000 50 
F57 "FSI_RX_EN" O L 4700 3650 50 
$EndSheet
Connection ~ 6550 5200
Connection ~ 6450 5300
Connection ~ 6350 5400
Wire Wire Line
	4700 1800 3400 1800
Wire Wire Line
	3400 1900 4700 1900
Wire Wire Line
	3400 2000 4700 2000
Wire Wire Line
	3400 2150 4700 2150
Wire Wire Line
	3400 2250 4700 2250
Wire Wire Line
	3400 2350 4700 2350
Wire Wire Line
	6100 3700 6850 3700
Wire Wire Line
	6100 3850 6850 3850
Wire Wire Line
	6100 3950 6850 3950
Wire Wire Line
	6100 4050 6850 4050
Wire Wire Line
	6100 4150 6850 4150
Wire Wire Line
	6100 4250 6850 4250
Wire Wire Line
	6100 4350 6850 4350
Wire Wire Line
	6100 4500 6850 4500
Wire Wire Line
	6100 4600 6850 4600
Wire Wire Line
	6100 4700 6850 4700
Wire Wire Line
	6100 4850 6850 4850
Wire Wire Line
	6100 4950 6850 4950
Wire Wire Line
	6100 5050 6850 5050
Wire Wire Line
	6100 5200 6550 5200
Wire Wire Line
	6100 5300 6450 5300
Wire Wire Line
	6100 5400 6350 5400
Wire Wire Line
	6100 5500 6850 5500
Wire Wire Line
	6100 5650 6850 5650
Wire Wire Line
	6100 3350 6850 3350
Wire Wire Line
	6100 3200 6850 3200
Wire Wire Line
	6100 2750 6850 2750
Wire Wire Line
	6100 2650 6850 2650
Wire Wire Line
	6100 2550 6850 2550
Wire Wire Line
	6100 2400 6850 2400
Wire Wire Line
	6100 2300 6850 2300
Wire Wire Line
	6100 2200 6850 2200
Wire Wire Line
	6100 2050 6850 2050
Wire Wire Line
	6100 1950 6850 1950
Wire Wire Line
	6100 1850 6850 1850
Wire Wire Line
	6100 1750 6850 1750
Wire Wire Line
	6100 1650 6850 1650
Wire Wire Line
	6100 1550 6850 1550
Wire Wire Line
	6100 1400 6850 1400
Wire Wire Line
	5450 1000 6800 1000
Text GLabel 4050 5100 1    50   Input ~ 0
VPOWER
Wire Wire Line
	4050 5200 4050 5100
$Comp
L power:GND #PWR?
U 1 1 5F796E31
P 4050 6150
AR Path="/5F310311/5F796E31" Ref="#PWR?"  Part="1" 
AR Path="/5F3255E8/5F796E31" Ref="#PWR?"  Part="1" 
AR Path="/5F387075/5F796E31" Ref="#PWR?"  Part="1" 
AR Path="/5F796E31" Ref="#PWR01"  Part="1" 
F 0 "#PWR01" H 4050 5900 50  0001 C CNN
F 1 "GND" H 4055 5977 50  0000 C CNN
F 2 "" H 4050 6150 50  0001 C CNN
F 3 "" H 4050 6150 50  0001 C CNN
	1    4050 6150
	1    0    0    -1  
$EndComp
Wire Wire Line
	4050 6150 4050 6050
$Comp
L power:GND #PWR?
U 1 1 5F796E38
P 4450 6150
AR Path="/5F310311/5F796E38" Ref="#PWR?"  Part="1" 
AR Path="/5F3255E8/5F796E38" Ref="#PWR?"  Part="1" 
AR Path="/5F387075/5F796E38" Ref="#PWR?"  Part="1" 
AR Path="/5F796E38" Ref="#PWR02"  Part="1" 
F 0 "#PWR02" H 4450 5900 50  0001 C CNN
F 1 "GND" H 4455 5977 50  0000 C CNN
F 2 "" H 4450 6150 50  0001 C CNN
F 3 "" H 4450 6150 50  0001 C CNN
	1    4450 6150
	1    0    0    -1  
$EndComp
Wire Wire Line
	4450 6150 4450 6100
Wire Wire Line
	4050 5500 4050 5600
Connection ~ 4050 5600
Wire Wire Line
	4050 5600 4050 5750
Wire Wire Line
	4050 5600 4450 5600
Connection ~ 4450 5600
Wire Wire Line
	4450 5600 4450 5800
$Comp
L Device:C C?
U 1 1 5F796E53
P 4450 5950
AR Path="/5F310311/5F796E53" Ref="C?"  Part="1" 
AR Path="/5F3255E8/5F796E53" Ref="C?"  Part="1" 
AR Path="/5F387075/5F796E53" Ref="C?"  Part="1" 
AR Path="/5F796E53" Ref="C1"  Part="1" 
F 0 "C1" H 4550 6050 50  0000 L CNN
F 1 "10nF" H 4550 5950 50  0000 L CNN
F 2 "Capacitor_SMD:C_0201_0603Metric" H 4488 5800 50  0001 C CNN
F 3 "https://www.murata.com/en-eu/products/productdetail?partno=GRM033R71E103KE14%23" H 4450 5950 50  0001 C CNN
F 4 "" H 4450 5950 50  0001 C CNN "Rated voltage"
F 5 "490-14454-1-ND" H 4450 5950 50  0001 C CNN "DigiKey"
F 6 "2990696" H 4450 5950 50  0001 C CNN "Farnell"
F 7 "81-GRM033R71E103KE4D" H 4450 5950 50  0001 C CNN "Mouser"
F 8 "GRM033R71E103KE14D" H 4450 5950 50  0001 C CNN "Part No"
F 9 "185-2059" H 4450 5950 50  0001 C CNN "RS"
F 10 "25V" H 4450 5950 50  0001 C CNN "Rated Voltage"
	1    4450 5950
	1    0    0    -1  
$EndComp
$Comp
L Connector:TestPoint TP?
U 1 1 5F796E59
P 4450 5600
AR Path="/5F310311/5F796E59" Ref="TP?"  Part="1" 
AR Path="/5F3255E8/5F796E59" Ref="TP?"  Part="1" 
AR Path="/5F387075/5F796E59" Ref="TP?"  Part="1" 
AR Path="/5F796E59" Ref="TP1"  Part="1" 
F 0 "TP1" H 4400 5900 50  0000 L CNN
F 1 "TestPoint" H 4400 5800 50  0000 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.5mm" H 4650 5600 50  0001 C CNN
F 3 "~" H 4650 5600 50  0001 C CNN
	1    4450 5600
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 5F796E7B
P 4050 5900
AR Path="/5F310311/5F796E7B" Ref="R?"  Part="1" 
AR Path="/5F3255E8/5F796E7B" Ref="R?"  Part="1" 
AR Path="/5F387075/5F796E7B" Ref="R?"  Part="1" 
AR Path="/5F796E7B" Ref="R2"  Part="1" 
F 0 "R2" H 4120 5946 50  0000 L CNN
F 1 "4.99k" H 4120 5855 50  0000 L CNN
F 2 "Resistor_SMD:R_0603_1608Metric" V 3980 5900 50  0001 C CNN
F 3 "~" H 4050 5900 50  0001 C CNN
	1    4050 5900
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 5F796E81
P 4050 5350
AR Path="/5F310311/5F796E81" Ref="R?"  Part="1" 
AR Path="/5F3255E8/5F796E81" Ref="R?"  Part="1" 
AR Path="/5F387075/5F796E81" Ref="R?"  Part="1" 
AR Path="/5F796E81" Ref="R1"  Part="1" 
F 0 "R1" H 4120 5396 50  0000 L CNN
F 1 "82k" H 4120 5305 50  0000 L CNN
F 2 "Resistor_SMD:R_0603_1608Metric" V 3980 5350 50  0001 C CNN
F 3 "~" H 4050 5350 50  0001 C CNN
	1    4050 5350
	1    0    0    -1  
$EndComp
$Sheet
S 2850 3300 550  450 
U 5F497A69
F0 "FSI Rx Bus Link" 50
F1 "OMODRI_FSI_RX.sch" 50
F2 "RX_D0_FSI" O R 3400 3450 50 
F3 "RX_D1_FSI" O R 3400 3550 50 
F4 "RX_CLK_FSI" O R 3400 3350 50 
F5 "RX_FSI_EN" I R 3400 3650 50 
$EndSheet
$Sheet
S 2850 2650 550  450 
U 5F4C38EC
F0 "FSI Tx Bus Link" 50
F1 "OMODRI_FSI_TX.sch" 50
F2 "TX_CLK_FSI" I R 3400 2700 50 
F3 "TX_D0_FSI" I R 3400 2800 50 
F4 "TX_D1_FSI" I R 3400 2900 50 
F5 "TX_FSI_EN" I R 3400 3000 50 
$EndSheet
Wire Wire Line
	4700 2700 3400 2700
Wire Wire Line
	3400 2800 4700 2800
Wire Wire Line
	4700 2900 3400 2900
Wire Wire Line
	3400 3000 4700 3000
Wire Wire Line
	3400 3350 4700 3350
Wire Wire Line
	3400 3450 4700 3450
Wire Wire Line
	3400 3550 4700 3550
Wire Wire Line
	3400 3650 4700 3650
Wire Wire Line
	4700 4000 3400 4000
Wire Wire Line
	3400 4100 4700 4100
NoConn ~ 3100 2200
Wire Wire Line
	4700 5600 4450 5600
$EndSCHEMATC
